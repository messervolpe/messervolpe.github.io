<!DOCTYPE html>
<html lang="en">
<head>
    <title>Archive</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- style -->
    <link href="css/styles.css" rel="stylesheet">
    <!-- font links -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Azeret+Mono:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">    
</head>
<body class="flex--desk items--start--desk">
    <header class="card card--s flex justify--space-between flex--col--desk items--center--desk">
            <a href="index.html" class="nav__logo">m/v</a>
            <nav class="flex--col items--end items--center--desk">
                <button class="btn--icon js-nav-btn"><img class="js-iconNav" src="svg/menu-open.svg" alt=""></button>
                <ul class="js-nav">
                    <li><a href="index.html" class="nav__link"><span class="">homepage</span></a></li>
                    <li><a href="archive.html" class="nav__link"><span class="nav__link--active">archive</span></a></li>
                    <li><a href="prompts.html" class="nav__link"><span class="">prompts</span></a></li>
                    <li><a href="shapes.html" class="nav__link"><span class="">shapes</span></a></li>
                    <li><a href="calculator.html" class="nav__link"><span class="">calculator</span></a></li>
                </ul>
            </nav>
    </header>
    <main class="card card--m stack--m">
            <div class="flex flex--wrap justify--space-between items--start">
                <h1>Lorem Ipsum Dolor</h1>
                <button class="btn--secondary">secondary</button>
            </div>
        <div class="js-arc-list stack--l"></div>
    </main>
    <script>

        let arcList = document.querySelector(".js-arc-list")
        let btnOpen = document.querySelector(".js-open");
        let monthAccordions = ""
        let monthList = ""

        fetch('json/archive.json')
        .then(response => response.json())
        .then(data => {document.querySelector(".js-arc-list")
            console.log("full data:", data);

            for (let month of data.months) {
               
                let monthName = month.name
                let categoryList = ""
                
                for (let category of month.categories) {

                    categoryName = category.name
                    let entryList = ""

                    for (entry of category.entries) {
                        let entryItem = "<li>" + entry + "</li>"
                        entryList += entryItem
                    }

                    categoryList +=  `
                     <section class="stack--xs flex--desk gap--s">
                        <h3 style="min-width:100px">${categoryName}</h3>
                        <ul>${entryList}</ul>
                    </section>
                    `
                }

                monthList += `
                    <details class="stack--s">
                    <summary>${monthName}</summary>
                        ${categoryList}
                    </details>
                    `
            }

            arcList.innerHTML = monthList
            let currentMonth = document.querySelector("details")
            currentMonth.setAttribute("open", "")

            monthAccordions = document.querySelectorAll("details")


            function toggleAccordions() {
            if (btnOpen.innerText == "open all") {
                for (let i = 0; i < monthAccordions.length; i++) {
                monthAccordions[i].setAttribute("open", "")
                btnOpen.innerText = "close all"
            }}
            else {
                for (let i = 0; i < monthAccordions.length; i++) {
                monthAccordions[i].removeAttribute("open", "")
                btnOpen.innerText = "open all"
             }
            }
             
            }

            btnOpen.addEventListener('click', toggleAccordions)

        })
    </script>
    <script type="text/javascript" src="js/nav.js"></script>

    
    <!-- {
    "name": "MonthName",
    "categories": [
        {
        "name": "read",
        "entries": ["**"]
        },
        {
        "name": "playing",
        "entries": ["**"]
        },
        {
        "name": "watched",
        "entries": ["**"]
        }
    ]
    } -->

</body>
</html>